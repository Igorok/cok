<script>
require (["jquery", "lodash", "cok_core", "cok_controller"], function ($, _, cok_core, cok_controller) {
    $(function () {
        var _user = cok_controller.checkedUser();
        var token = _user.token;
        var renderFriends = function () {
            cok_core.call("user.getFriendList", {token: token}, function (result) {
                cok_core.render ($("#friendsCase tbody"), "userList", {data: result[0]});
            });
        };

        renderFriends();
        $('#friendsCase').on('click', '.delFriendBtn', function () {
            var btn = $(this);
            var _id = btn.attr('data-id');
            cok_core.call("user.deleteFriend", {token: token, _id: _id}, function (result) {
                renderFriends();
            });
        });
    });
});
</script>
<div id="friendsCase" class="sub-container">
    <table class="table table-striped table-hover"><tbody></tbody></table>
</div>
